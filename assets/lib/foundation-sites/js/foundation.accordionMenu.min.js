!function(n){"use strict";function i(e,t){this.$element=e,this.options=n.extend({},i.defaults,this.$element.data(),t),Foundation.Nest.Feather(this.$element,"accordion"),this._init(),Foundation.registerPlugin(this,"AccordionMenu"),Foundation.Keyboard.register("AccordionMenu",{ENTER:"toggle",SPACE:"toggle",ARROW_RIGHT:"open",ARROW_UP:"up",ARROW_DOWN:"down",ARROW_LEFT:"close",ESCAPE:"closeAll",TAB:"down",SHIFT_TAB:"up"})}i.defaults={slideSpeed:250,multiOpen:!0},i.prototype._init=function(){this.$element.find("[data-submenu]").not(".is-active").slideUp(0),this.$element.attr({role:"tablist","aria-multiselectable":this.options.multiOpen}),this.$menuLinks=this.$element.find(".is-accordion-submenu-parent"),this.$menuLinks.each(function(){var i=this.id||Foundation.GetYoDigits(6,"acc-menu-link"),e=n(this),t=e.children("[data-submenu]"),o=t[0].id||Foundation.GetYoDigits(6,"acc-menu"),a=t.hasClass("is-active");e.attr({"aria-controls":o,"aria-expanded":a,role:"tab",id:i}),t.attr({"aria-labelledby":i,"aria-hidden":!a,role:"tabpanel",id:o})});var i=this.$element.find(".is-active");if(i.length){var e=this;i.each(function(){e.down(n(this))})}this._events()},i.prototype._events=function(){var i=this;this.$element.find("li").each(function(){var e=n(this).children("[data-submenu]");e.length&&n(this).children("a").off("click.zf.accordionMenu").on("click.zf.accordionMenu",function(n){n.preventDefault(),i.toggle(e)})}).on("keydown.zf.accordionmenu",function(e){var t,o,a=n(this),s=a.parent("ul").children("li"),d=a.children("[data-submenu]");s.each(function(i){return n(this).is(a)?(t=s.eq(Math.max(0,i-1)),o=s.eq(Math.min(i+1,s.length-1)),n(this).children("[data-submenu]:visible").length&&(o=a.find("li:first-child")),n(this).is(":first-child")?t=a.parents("li").first():t.children("[data-submenu]:visible").length&&(t=t.find("li:last-child")),void(n(this).is(":last-child")&&(o=a.parents("li").first().next("li")))):void 0}),Foundation.Keyboard.handleKey(e,"AccordionMenu",{open:function(){d.is(":hidden")&&(i.down(d),d.find("li").first().focus())},close:function(){d.length&&!d.is(":hidden")?i.up(d):a.parent("[data-submenu]").length&&(i.up(a.parent("[data-submenu]")),a.parents("li").first().focus())},up:function(){t.focus()},down:function(){o.focus()},toggle:function(){a.children("[data-submenu]").length&&i.toggle(a.children("[data-submenu]"))},closeAll:function(){i.hideAll()},handled:function(){e.preventDefault(),e.stopImmediatePropagation()}})})},i.prototype.hideAll=function(){this.$element.find("[data-submenu]").slideUp(this.options.slideSpeed)},i.prototype.toggle=function(n){n.is(":animated")||(n.is(":hidden")?this.down(n):this.up(n))},i.prototype.down=function(n){var i=this;this.options.multiOpen||this.up(this.$element.find(".is-active").not(n.parentsUntil(this.$element).add(n))),n.addClass("is-active").attr({"aria-hidden":!1}).parent(".is-accordion-submenu-parent").attr({"aria-expanded":!0}),Foundation.Move(this.options.slideSpeed,n,function(){n.slideDown(i.options.slideSpeed,function(){i.$element.trigger("down.zf.accordionMenu",[n])})})},i.prototype.up=function(n){var i=this;Foundation.Move(this.options.slideSpeed,n,function(){n.slideUp(i.options.slideSpeed,function(){i.$element.trigger("up.zf.accordionMenu",[n])})});var e=n.find("[data-submenu]").slideUp(0).addBack().attr("aria-hidden",!0);e.parent(".is-accordion-submenu-parent").attr("aria-expanded",!1)},i.prototype.destroy=function(){this.$element.find("[data-submenu]").slideDown(0).css("display",""),this.$element.find("a").off("click.zf.accordionMenu"),Foundation.Nest.Burn(this.$element,"accordion"),Foundation.unregisterPlugin(this)},Foundation.plugin(i,"AccordionMenu")}(jQuery,window.Foundation);