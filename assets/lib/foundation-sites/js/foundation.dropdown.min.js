!function(t,e){"use strict";function o(s,i){this.$element=s,this.options=t.extend({},o.defaults,this.$element.data(),i),this._init(),e.registerPlugin(this,"Dropdown"),e.Keyboard.register("Dropdown",{ENTER:"open",SPACE:"open",ESCAPE:"close",TAB:"tab_forward",SHIFT_TAB:"tab_backward"})}o.defaults={hoverDelay:250,hover:!1,hoverPane:!1,vOffset:1,hOffset:1,positionClass:"",trapFocus:!1,autoFocus:!1,closeOnClick:!1},o.prototype._init=function(){var o=this.$element.attr("id");this.$anchor=t('[data-toggle="'+o+'"]')||t('[data-open="'+o+'"]'),this.$anchor.attr({"aria-controls":o,"data-is-focus":!1,"data-yeti-box":o,"aria-haspopup":!0,"aria-expanded":!1}),this.options.positionClass=this.getPositionClass(),this.counter=4,this.usedPositions=[],this.$element.attr({"aria-hidden":"true","data-yeti-box":o,"data-resize":o,"aria-labelledby":this.$anchor[0].id||e.GetYoDigits(6,"dd-anchor")}),this._events()},o.prototype.getPositionClass=function(){var t=this.$element[0].className.match(/\b(top|left|right)\b/g);return t=t?t[0]:""},o.prototype._reposition=function(t){this.usedPositions.push(t?t:"bottom"),!t&&this.usedPositions.indexOf("top")<0?this.$element.addClass("top"):"top"===t&&this.usedPositions.indexOf("bottom")<0?this.$element.removeClass(t):"left"===t&&this.usedPositions.indexOf("right")<0?this.$element.removeClass(t).addClass("right"):"right"===t&&this.usedPositions.indexOf("left")<0?this.$element.removeClass(t).addClass("left"):!t&&this.usedPositions.indexOf("top")>-1&&this.usedPositions.indexOf("left")<0?this.$element.addClass("left"):"top"===t&&this.usedPositions.indexOf("bottom")>-1&&this.usedPositions.indexOf("left")<0?this.$element.removeClass(t).addClass("left"):"left"===t&&this.usedPositions.indexOf("right")>-1&&this.usedPositions.indexOf("bottom")<0?this.$element.removeClass(t):"right"===t&&this.usedPositions.indexOf("left")>-1&&this.usedPositions.indexOf("bottom")<0?this.$element.removeClass(t):this.$element.removeClass(t),this.classChanged=!0,this.counter--},o.prototype._setPosition=function(){if("false"===this.$anchor.attr("aria-expanded"))return!1;var t=this.getPositionClass(),o=e.Box.GetDimensions(this.$element),s=(e.Box.GetDimensions(this.$anchor),"left"===t?"left":"right"===t?"left":"top"),i="top"===s?"height":"width";"height"===i?this.options.vOffset:this.options.hOffset;if(o.width>=o.windowDims.width||!this.counter&&!e.Box.ImNotTouchingYou(this.$element))return this.$element.offset(e.Box.GetOffsets(this.$element,this.$anchor,"center bottom",this.options.vOffset,this.options.hOffset,!0)).css({width:o.windowDims.width-2*this.options.hOffset,height:"auto"}),this.classChanged=!0,!1;for(this.$element.offset(e.Box.GetOffsets(this.$element,this.$anchor,t,this.options.vOffset,this.options.hOffset));!e.Box.ImNotTouchingYou(this.$element)&&this.counter;)this._reposition(t),this._setPosition()},o.prototype._events=function(){var o=this;this.$element.on({"open.zf.trigger":this.open.bind(this),"close.zf.trigger":this.close.bind(this),"toggle.zf.trigger":this.toggle.bind(this),"resizeme.zf.trigger":this._setPosition.bind(this)}),this.options.hover&&(this.$anchor.off("mouseenter.zf.dropdown mouseleave.zf.dropdown").on("mouseenter.zf.dropdown",function(){clearTimeout(o.timeout),o.timeout=setTimeout(function(){o.open(),o.$anchor.data("hover",!0)},o.options.hoverDelay)}).on("mouseleave.zf.dropdown",function(){clearTimeout(o.timeout),o.timeout=setTimeout(function(){o.close(),o.$anchor.data("hover",!1)},o.options.hoverDelay)}),this.options.hoverPane&&this.$element.off("mouseenter.zf.dropdown mouseleave.zf.dropdown").on("mouseenter.zf.dropdown",function(){clearTimeout(o.timeout)}).on("mouseleave.zf.dropdown",function(){clearTimeout(o.timeout),o.timeout=setTimeout(function(){o.close(),o.$anchor.data("hover",!1)},o.options.hoverDelay)})),this.$anchor.add(this.$element).on("keydown.zf.dropdown",function(s){var i=t(this),n=e.Keyboard.findFocusable(o.$element);e.Keyboard.handleKey(s,"Dropdown",{tab_forward:function(){o.$element.find(":focus").is(n.eq(-1))&&(o.options.trapFocus?(n.eq(0).focus(),s.preventDefault()):o.close())},tab_backward:function(){(o.$element.find(":focus").is(n.eq(0))||o.$element.is(":focus"))&&(o.options.trapFocus?(n.eq(-1).focus(),s.preventDefault()):o.close())},open:function(){i.is(o.$anchor)&&(o.open(),o.$element.attr("tabindex",-1).focus(),s.preventDefault())},close:function(){o.close(),o.$anchor.focus()}})})},o.prototype._addBodyHandler=function(){var e=t(document.body).not(this.$element),o=this;e.off("click.zf.dropdown").on("click.zf.dropdown",function(t){o.$anchor.is(t.target)||o.$anchor.find(t.target).length||o.$element.find(t.target).length||(o.close(),e.off("click.zf.dropdown"))})},o.prototype.open=function(){if(this.$element.trigger("closeme.zf.dropdown",this.$element.attr("id")),this.$anchor.addClass("hover").attr({"aria-expanded":!0}),this._setPosition(),this.$element.addClass("is-open").attr({"aria-hidden":!1}),this.options.autoFocus){var t=e.Keyboard.findFocusable(this.$element);t.length&&t.eq(0).focus()}this.options.closeOnClick&&this._addBodyHandler(),this.$element.trigger("show.zf.dropdown",[this.$element])},o.prototype.close=function(){if(!this.$element.hasClass("is-open"))return!1;if(this.$element.removeClass("is-open").attr({"aria-hidden":!0}),this.$anchor.removeClass("hover").attr("aria-expanded",!1),this.classChanged){var t=this.getPositionClass();t&&this.$element.removeClass(t),this.$element.addClass(this.options.positionClass).css({height:"",width:""}),this.classChanged=!1,this.counter=4,this.usedPositions.length=0}this.$element.trigger("hide.zf.dropdown",[this.$element])},o.prototype.toggle=function(){if(this.$element.hasClass("is-open")){if(this.$anchor.data("hover"))return;this.close()}else this.open()},o.prototype.destroy=function(){this.$element.off(".zf.trigger").hide(),this.$anchor.off(".zf.dropdown"),e.unregisterPlugin(this)},e.plugin(o,"Dropdown")}(jQuery,window.Foundation);