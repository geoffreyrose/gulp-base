!function(e,t){"use strict";function i(s,h){this.$element=s,this.options=t.extend({},i.defaults,this.$element.data(),h),this._init(),e.registerPlugin(this,"Equalizer")}i.defaults={equalizeOnStack:!0,equalizeByRow:!1,equalizeOn:""},i.prototype._init=function(){var i=this.$element.attr("data-equalizer")||"",s=this.$element.find('[data-equalizer-watch="'+i+'"]');this.$watched=s.length?s:this.$element.find("[data-equalizer-watch]"),this.$element.attr("data-resize",i||e.GetYoDigits(6,"eq")),this.hasNested=this.$element.find("[data-equalizer]").length>0,this.isNested=this.$element.parentsUntil(document.body,"[data-equalizer]").length>0,this.isOn=!1;var h,n=this.$element.find("img");this.options.equalizeOn?(h=this._checkMQ(),t(window).on("changed.zf.mediaquery",this._checkMQ.bind(this))):this._events(),(void 0!==h&&h===!1||void 0===h)&&(n.length?e.onImagesLoaded(n,this._reflow.bind(this)):this._reflow())},i.prototype._pauseEvents=function(){this.isOn=!1,this.$element.off(".zf.equalizer resizeme.zf.trigger")},i.prototype._events=function(){var e=this;this._pauseEvents(),this.hasNested?this.$element.on("postequalized.zf.equalizer",function(t){t.target!==e.$element[0]&&e._reflow()}):this.$element.on("resizeme.zf.trigger",this._reflow.bind(this)),this.isOn=!0},i.prototype._checkMQ=function(){var t=!e.MediaQuery.atLeast(this.options.equalizeOn);return t?this.isOn&&(this._pauseEvents(),this.$watched.css("height","auto")):this.isOn||this._events(),t},i.prototype._killswitch=function(){},i.prototype._reflow=function(){return!this.options.equalizeOnStack&&this._isStacked()?(this.$watched.css("height","auto"),!1):void(this.options.equalizeByRow?this.getHeightsByRow(this.applyHeightByRow.bind(this)):this.getHeights(this.applyHeight.bind(this)))},i.prototype._isStacked=function(){return this.$watched[0].offsetTop!==this.$watched[1].offsetTop},i.prototype.getHeights=function(e){for(var t=[],i=0,s=this.$watched.length;s>i;i++)this.$watched[i].style.height="auto",t.push(this.$watched[i].offsetHeight);e(t)},i.prototype.getHeightsByRow=function(e){var i=this.$watched.first().offset().top,s=[],h=0;s[h]=[];for(var n=0,a=this.$watched.length;a>n;n++){this.$watched[n].style.height="auto";var o=t(this.$watched[n]).offset().top;o!=i&&(h++,s[h]=[],i=o),s[h].push([this.$watched[n],this.$watched[n].offsetHeight])}for(var r=0,l=s.length;l>r;r++){var u=t(s[r]).map(function(){return this[1]}).get(),d=Math.max.apply(null,u);s[r].push(d)}e(s)},i.prototype.applyHeight=function(e){var t=Math.max.apply(null,e);this.$element.trigger("preequalized.zf.equalizer"),this.$watched.css("height",t),this.$element.trigger("postequalized.zf.equalizer")},i.prototype.applyHeightByRow=function(e){this.$element.trigger("preequalized.zf.equalizer");for(var i=0,s=e.length;s>i;i++){var h=e[i].length,n=e[i][h-1];if(2>=h)t(e[i][0][0]).css({height:"auto"});else{this.$element.trigger("preequalizedrow.zf.equalizer");for(var a=0,o=h-1;o>a;a++)t(e[i][a][0]).css({height:n});this.$element.trigger("postequalizedrow.zf.equalizer")}}this.$element.trigger("postequalized.zf.equalizer")},i.prototype.destroy=function(){this._pauseEvents(),this.$watched.css("height","auto"),e.unregisterPlugin(this)},e.plugin(i,"Equalizer"),"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports=i),"function"==typeof define&&define(["foundation"],function(){return i})}(Foundation,jQuery);